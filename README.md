
### ä»‹ç»
- ä½¿ç”¨DFAç®—æ³•å®ç°å…³é”®è¯/æ•æ„Ÿè¯æ£€æµ‹ã€‚æœ‰é—®é¢˜å¯ä»¥è”ç³»æˆ‘ QQ:`772532526`

- ä¼˜ç‚¹ï¼š
	- å¿«é€Ÿã€‚å¤æ‚åº¦O(1)
	- å¿½ç•¥è‹±æ–‡å¤§å°å†™ã€‚
	- å¿½ç•¥å¸¸è§ç¬¦å·ã€‚ä¾‹å¦‚è®¾ç½®å…³é”®å­—`å‚»é€¼`ï¼Œåˆ™`å‚»-é€¼`ã€`å‚»ã€é€¼`ä¹Ÿèƒ½è¢«è¯†åˆ«åˆ°ã€‚
	- æ”¯æŒé€šé…ç¬¦*ã€‚ä¸€ä¸ªé€šé…ç¬¦*å¿…å®šåŒ¹é…ä¸€ä¸ªéç¬¦å·å­—ç¬¦ã€‚ æ‰€ä»¥`fu*k`ä¸èƒ½è¯†åˆ«`fuk`ã€`fu.k`ã€`fucck`
	- æ‰“æ ‡ç­¾ã€‚å¯¹å…³é”®è¯åˆ†ç±»ï¼Œæ›´å¥½åœ°å®šåˆ¶åŒ–å¤„ç†ã€‚ä¾‹å¦‚äººå·¥åˆ†ç±»å¤šä¸ªç§ç±»çš„å…³é”®è¯ï¼šæ”¿æ²»ã€è‰²æƒ…ã€è¾±éª‚ã€å¹¿å‘Š ...
	- é€‰æ‹©æ€§æ›¿æ¢ã€‚æ£€æµ‹å¾—åˆ°ä½†æ˜¯ä¸æ›¿æ¢æ–‡æœ¬ã€‚ä¾‹å¦‚ä½ å¸Œæœ›å¯¹ç–‘ä¼¼è¥é”€ã€å¹¿å‘Šçš„å…³é”®è¯ä¸è¿›è¡Œæ›¿æ¢ï¼Œä»…ç°å­—æç¤ºæ¶ˆæ¯æ¥å—è€…æ³¨æ„ã€‚

- å…¶ä»–è¯´æ˜
	- å…³é”®è¯çš„å½•å…¥ä¼šå¿½ç•¥ç¬¦å·ã€‚ é€šé…ç¬¦*ä¸å…è®¸æ”¾åœ¨ç¬¬ä¸€ä½ã€‚
	- `å‚»é€¼`çš„ç­‰ä»·è¯å¾ˆå¤š`å‚»b`ã€`å‚»x`ã€`å‚»bi`ç­‰ï¼Œä½¿ç”¨`å‚»*`å›ºç„¶å¯ä»¥å…¨æ€æ­¤ç±»ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹å¼ï¼Œ`å‚»å­`ä¸åº”è¯¥è¢«ç¦ã€‚ä¸»è¦è¿˜æ˜¯å®ƒè¿‡çŸ­åŠå¯èƒ½æ€§å¤ªå¤šã€‚  `è¿·*è¯	`å°±ä¸å¤ªå­˜åœ¨è¯¯æ€çš„å¯èƒ½ã€‚ 
	- ä¸­æ–‡å¾ˆéº»çƒ¦çš„ä¸€ç‚¹æ˜¯å‰åè¯çš„è”åŠ¨ï¼Œä¾‹å¦‚`æ“ä½ *`ä½ è§‰å¾—åº”è¯¥ç¦æ‰ï¼Œä½†æ˜¯å®ƒä¼šè¯¯æ€`å¹¿æ’­ä½“æ“ä½ ä¼šå—`ã€‚ è¿˜æœ‰`è‰²æƒ…`ã€`ç™½è‰²æƒ…äººèŠ‚`ã€‚ ç‰¹ä¾‹å¾ˆå°‘ï¼Œä½†é€šé…ç¬¦çš„ä½¿ç”¨è¿˜æ˜¯è¦å¾ˆæ…é‡ã€‚å¦‚æœç¡®å®šåªå­˜åœ¨ä¸¤ä¸‰ç§æƒ…å†µï¼Œå»ºè®®éƒ½åˆ—å‡ºæ¥æ·»åŠ ã€‚
	- æœ¬é¡¹ç›®ä¸åŒ…å«æ•æ„Ÿè¯åº“ã€‚å¦‚æœä½ æ²¡æœ‰å¯ä»¥å‚è€ƒ `https://github.com/fwwdn/sensitive-stop-words`


### å‡½æ•°è¯´æ˜
- [x] `New() *Sieve` åˆ›å»ºæ–°çš„å®ä¾‹
- [x] `(*Sieve) Add(words []string) (fail []string)` æ·»åŠ ã€‚è¿”å›å¤±è´¥çš„è¯
- [x] `(*Sieve) AddByFile(filename string, tag uint8, autoReplace bool) (fails []string, err error)` ä»æ–‡ä»¶ä¸­æ·»åŠ ã€‚è®¾ç½®æ ‡ç­¾åŠæ›¿æ¢ä¸å¦ã€‚ï¼ˆæ”¯æŒè¿œç¨‹æ–‡ä»¶ï¼Œä½†ä¸å»ºè®®ï¼‰
- [x] `(*Sieve) Search(text string) (string, uint8)` æœç´¢ã€‚è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å…³é”®è¯å’Œå…¶æ ‡ç­¾ã€‚
- [x] `(*Sieve) Replace(text string) (string, map[uint8][]string)` æ›¿æ¢ã€‚è¿”å›æ›¿æ¢åçš„æ–‡æœ¬å’Œå…¶åŒ…å«çš„å…³é”®è¯æƒ…å†µã€‚


### æ•ˆæœ
```sh
===== åŸºç¡€ç”¨æ³•ï¼šæ·»åŠ ã€ç§»é™¤ã€æœç´¢ã€æ›¿æ¢
æ·»åŠ : è‹¹æœ è¥¿çº¢æŸ¿ è‘¡è„
ç§»é™¤: è‘¡è„
æµ‹è¯•: æˆ‘æƒ³åƒè‘¡è„å’Œè¥¿çº¢æŸ¿ï¼Œè‹¹æœä¹Ÿä¸é”™
æœç´¢å…³é”®è¯: è¥¿çº¢æŸ¿
æ›¿æ¢å: æˆ‘æƒ³åƒè‘¡è„å’Œ***ï¼Œ**ä¹Ÿä¸é”™

===== è¿›é˜¶ç”¨æ³•ï¼šé€šé…ç¬¦ã€å¿½ç•¥å¤§å°å†™ã€ç¬¦å·å¹²æ‰°æ— æ•ˆ
æ·»åŠ : fuck æ“ä½ *
æµ‹è¯•: FUCK!æˆ‘æ“ä½ xã€æ“ä½ ğŸã€æ“ä½ &x
æ›¿æ¢å: ****!æˆ‘***ã€***ã€****

===== ç‰¹æ®ŠåŠŸèƒ½ï¼šæ‰“æ ‡ç­¾
æ·»åŠ è¯å…¸: ./keyword è®¾ç½®æ ‡ç­¾: 1 è‡ªåŠ¨æ›¿æ¢
æµ‹è¯•: ä½ æ˜¯å‚»bä¹ˆï¼Ÿè¿™ä¹ˆå‚»å‘¢ï¼
æ›¿æ¢å: ä½ æ˜¯**ä¹ˆï¼Ÿè¿™ä¹ˆå‚»å‘¢ï¼
åŒ…å«æ•æ„Ÿè¯:  map[1:[å‚»b]]

===== ç‰¹æ®ŠåŠŸèƒ½ï¼šä¸æ›¿æ¢ (ä»…å‘ç°ï¼Œå¦è¡Œå¤„ç†) =====
æ·»åŠ è¯å…¸: ./keyword è®¾ç½®æ ‡ç­¾: 2 ä¸æ›¿æ¢
æµ‹è¯•: äºŒæ‰‹æˆ¿æ€ä¹ˆæ ·
æ›¿æ¢å: äºŒæ‰‹æˆ¿æ€ä¹ˆæ ·
åŒ…å«æ•æ„Ÿè¯:  map[2:[äºŒæ‰‹]]
```

1. å¼•ç”¨
```sh
go get -u github.com/tomatocuke/sieve@latest
```

2. ä½¿ç”¨
```go
package main

import (
	"fmt"
	"strings"
	"testing"
)

var (
	filter = New()

	myDemoKeywords = "./keyword"
)

func main() {
	// ===== åŸºç¡€ç”¨æ³•ï¼šæ·»åŠ ã€ç§»é™¤ã€æœç´¢ã€æ›¿æ¢ =====
	demo1()

	// ===== è¿›é˜¶ç”¨æ³•ï¼šé€šé…ç¬¦ã€å¿½ç•¥å¤§å°å†™ã€ç¬¦å·å¹²æ‰°æ— æ•ˆ =====
	demo2()

	// ===== ç‰¹æ®ŠåŠŸèƒ½ï¼šæ‰“æ ‡ç­¾ (ç”¨äºåŒºåˆ†æ•æ„Ÿè¯ç±»å‹) =====
	demo3()

	// ===== ç‰¹æ®ŠåŠŸèƒ½ï¼šä¸æ›¿æ¢ (ä»…å‘ç°) =====
	demo4()
}

func demo1() {
	// æ·»åŠ 
	filter.Add([]string{"è‹¹æœ", "è¥¿çº¢æŸ¿", "è‘¡è„"})
	// ç§»é™¤
	filter.Remove([]string{"è‘¡è„"})
	const text = "æˆ‘æƒ³åƒè‘¡è„å’Œè¥¿çº¢æŸ¿ï¼Œè‹¹æœä¹Ÿä¸é”™"
	// æœç´¢ (ç¬¬ä¸€ä¸ªå…³é”®è¯)
	searchKeyword, _ := filter.Search(text)
	// æ›¿æ¢
	replaceText, _ := filter.Replace(text)

	fmt.Println("\n===== åŸºç¡€ç”¨æ³•ï¼šæ·»åŠ ã€ç§»é™¤ã€æœç´¢ã€æ›¿æ¢")
	fmt.Println("æ·»åŠ :", "è‹¹æœ", "è¥¿çº¢æŸ¿", "è‘¡è„")
	fmt.Println("ç§»é™¤:", "è‘¡è„")
	fmt.Println("æµ‹è¯•:", text)
	fmt.Println("æœç´¢å…³é”®è¯:", searchKeyword)
	fmt.Println("æ›¿æ¢å:", replaceText)
}

func demo2() {
	const text = "FUCK!æˆ‘æ“ä½ xã€æ“ä½ ğŸã€æ“ä½ &x"
	filter.Add([]string{"fuck", "æ“ä½ *"})
	replaceText, _ := filter.Replace(text)

	fmt.Println("\n===== è¿›é˜¶ç”¨æ³•ï¼šé€šé…ç¬¦ã€å¿½ç•¥å¤§å°å†™ã€ç¬¦å·å¹²æ‰°æ— æ•ˆ")
	fmt.Println("æ·»åŠ :", "fuck", "æ“ä½ *")
	fmt.Println("æµ‹è¯•:", text)
	fmt.Println("æ›¿æ¢å:", replaceText)
}

// è®¾ç½®åˆ†ç±»æ ‡ç­¾
const (
	TagDefault = iota
	TagInsult
	TagTrade
)

func demo3() {
	const text = "ä½ æ˜¯å‚»bä¹ˆï¼Ÿè¿™ä¹ˆå‚»å‘¢ï¼"
	fails, err := filter.AddByFile(myDemoKeywords, TagInsult, true)
	if err != nil {
		panic(err)
	}
	replaceText, keywords := filter.Replace(text)

	fmt.Println("\n===== ç‰¹æ®ŠåŠŸèƒ½ï¼šæ‰“æ ‡ç­¾")
	fmt.Printf("æ·»åŠ è¯å…¸: %s è®¾ç½®æ ‡ç­¾: %d è‡ªåŠ¨æ›¿æ¢\n", myDemoKeywords, TagInsult)
	if len(fails) > 0 {
		fmt.Println("æ·»åŠ å¤±è´¥:", fails)
	}
	fmt.Println("æµ‹è¯•:", text)
	fmt.Println("æ›¿æ¢å:", replaceText)
	fmt.Println("åŒ…å«æ•æ„Ÿè¯: ", keywords)
}

func demo4() {
	const text = "äºŒæ‰‹æˆ¿æ€ä¹ˆæ ·"
	filter.AddByFile(myDemoKeywords, TagTrade, false)
	replaceText, keywords := filter.Replace(text)

	fmt.Println("\n===== ç‰¹æ®ŠåŠŸèƒ½ï¼šä¸æ›¿æ¢ (ä»…å‘ç°ï¼Œå¦è¡Œå¤„ç†) =====")
	fmt.Printf("æ·»åŠ è¯å…¸: %s è®¾ç½®æ ‡ç­¾: %d ä¸æ›¿æ¢\n", myDemoKeywords, TagTrade)
	fmt.Println("æµ‹è¯•:", text)
	fmt.Println("æ›¿æ¢å:", replaceText)
	fmt.Println("åŒ…å«æ•æ„Ÿè¯: ", keywords)
}

var longText = strings.Repeat("å“¦ğŸ˜¯å“ˆHA", 20) // 100å­—ç¬¦

func BenchmarkReplace(b *testing.B) {
	for i := 0; i < b.N; i++ {
		filter.Replace(longText)
	}
}

func BenchmarkSearch(b *testing.B) {
	for i := 0; i < b.N; i++ {
		filter.Search(longText)
	}
}
```

